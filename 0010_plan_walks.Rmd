---
title: "0010_plan_walks"
author: "adopted by Craig W. Slinkman"
date: "6/13/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Purpose of this R-Markdown document

The puepose of this document is to plan the next walk.  It is cone by sorting the active walks by the last date that a route was walked.

## Load required_oackages

```{r load_packages}

source('~/R-Projects/MyWalks/functions/load_packages.R')

```

## SMake cowplot as the deafault graphics theme  

```{r}

theme_set( theme_cowplot())

```

## Load required_functions 

```{r get_all_day_routes}

source('~/R-Projects/MyWalks/functions/get_day_routes.R')

```

## Get all day_routes

```{r}

all_day_routes <- get_day_routes()
all_day_routes

```

## Keep only days where a walked occured 

```{r}
only_walks <-
    all_day_routes %>% 
        filter( walked == 1 )
        only_walks
```


```{r}
only_walks <-
    all_day_routes %>% 
        filter( walked == 1 )
        only_walks
only_walks

```


## Find all the walks with an activr route

We filter out routes that are not active routes. We then find

```{r keep_active_routes_only}

active_route_walks <- 
    only_walks %>% 
        filter( active == 1)

```


## Extrct the last time walked for each route

## Group by route and find last walk withing each group  

```{r group_by_route_and find last_walk}

last_date_walked <- 
    active_route_walks %>% 
        group_by( route ) %>% 
            arrange( route, date_time ) %>% 
                slice_max( date_time )
           
last_date_walked %>%
    mutate( date = as.Date( date_time )) %>% 
    arrange( date ) %>% 
        select( route, date ) %>%
            flextable() %>% 
                width( j = 1, 3 ) %>% 
                width( j = 2, 3 )
        
```

