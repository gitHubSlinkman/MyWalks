---
title: "Last 007 days walks"
author: "adopted by Craig W. Slinkman"
date: "6/16/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown
the R-Markdown documnt lists the last 7 days walk activity and provides a summary of the last 7 days.

```{r load_packages}
source('~/R-Projects/MyWalks/functions/load_packages.R')
```

```{r set_cowplot_to_defefault_theme}
theme_set( theme_cowplot )
```

```{r define_functions}
source('~/R-Projects/MyWalks/functions/get_day_routes.R')
source('~/R-Projects/MyWalks/functions/compute_parametrics.R')

```

```{r read_data}
all_walks <- get_day_routes()
```

```{r keep_the_last_007_days_data}

############################################################################
# Determine the date of the first walk to be analysed.
############################################################################

first_date <- as.Date( now()) - 7

############################################################################# Add plain date and chr_day for reporting.
############################################################################


last_007_days_walks <-    
    all_walks  %>% 
        mutate( date = date( date_time ),
                chr_day = wday( date_time,
                                label = TRUE,
                                abbr = TRUE,
                                week_start = 
                                getOption("lubridate.week.start", 7)))


###########################################################################
# Sort id descending order ny date_time and select variables needed for 
# report.
############################################################################

last_007_days_walks <- 
    last_007_days_walks %>% 
        filter( date >= first_date ) %>% 
            arrange( desc( date_time  )) %>% 
                select( date_time,
                        chr_day,
                        walked,
                        miles,
                        hours,
                        mph )

last_007_days_walks               
            
          
        


```

```{r list_selected_walks_data}
last_007_days_walks %>% 
    mutate( formatted_date <- format(  date_time, 
                                       "%y-%m-%d" ),
            week_day       <- wday( date_time, 
                                    label = TRUE, 
                                    abbr = TRUE )) 
    
            

```

